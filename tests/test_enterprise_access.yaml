---
- config:
    - testset: 'Enterprise Access API'

- test:
    - name: 'Policy Allocation endpoint returns HTTP 200'
    - url: '/enterprise/v1/policy-allocation/9101d3de36156cba/allocate?content_key=edx+DemoX&content_price_cents=55&learner_emails=["abc@example.com"]'
    - method: 'POST'
    - headers: { 'Authorization': 'aeiou', 'Content-Type': 'application/json' }
    - expected_status: [200]

- test:
    - name: 'Policy Allocation endpoint rejected without Authorization'
    - url: '/enterprise/v1/policy-allocation/9101d3de36156cba/allocate?content_key=edx+DemoX&content_price_cents=55&learner_emails=["abc@example.com"]'
    - method: 'POST'
    - expected_status: [400]

- test:
    - name: 'Policy Allocation endpoint returns HTTP 400 when required query param is missing'
    - url: '/enterprise/v1/policy-allocation/9101d3de36156cba/allocate'
    - method: 'POST'
    - headers: { 'Authorization': 'aeiou', 'Content-Type': 'application/json' }
    - expected_status: [400]


- test:
    - name: 'Assignment configuration cancel endpoint returns HTTP 200'
    - url: '/enterprise/v1/assignment-configurations/9101d3de36156cba/admin/assignments/cancel/'
    - method: 'POST'
    - headers: { 'Authorization': 'aeiou', 'Content-Type': 'application/json' }
    - body: >
          [
              {
                  "assignment_uuids": ["01234567-89ab-cdef-0123-456789abcdef", "abcdef01-2345-6789-abcd-ef0123456789"]
              }
          ]
    - expected_status: [200]

- test:
    - name: 'POST rejected without authorization'
    - url: '/enterprise/v1/assignment-configurations/0123456789abcdefg/admin/assignments/cancel/'
    - method: 'POST'
    - expected_status: [400]

- test:
    - name: 'Assignment configuration remind endpoint returns HTTP 200'
    - url: '/enterprise/v1/assignment-configurations/9101d3de36156cba/admin/assignments/remind/'
    - method: 'POST'
    - headers: { 'Authorization': 'aeiou', 'Content-Type': 'application/json' }
    - body: >
          [
              {
                  "assignment_uuids": ["01234567-89ab-cdef-0123-456789abcdef", "abcdef01-2345-6789-abcd-ef0123456789"]
              }
          ]
    - expected_status: [200]

- test:
    - name: 'POST rejected without authorization'
    - url: '/enterprise/v1/assignment-configurations/0123456789abcdefg/admin/assignments/remind/'
    - method: 'POST'
    - expected_status: [400]

