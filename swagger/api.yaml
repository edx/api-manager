# Swagger specification for the Open edX API
# Note: not all API endpoints need to be listed here, just those that
#  are part of your Open edX installation's "public API".

---
swagger: "2.0"
info:
  version: "1.0.0"
  title: "Open edX"
host: "{{host}}"
basePath: "/"
schemes:
- "https"

# Complete set of whitelisted routes.
# Upstream API owners: provide an fixed URI ref for each route.
paths:

  # Index
  "/":
    $ref: "./index.yaml#/endpoints/index"

  # Heartbeat
  "/heartbeat":
    $ref: "./heartbeat.yaml#/endpoints/heartbeat"

  # OAuth2
  "/oauth2/v1/access_token":
    $ref: "./oauth.yaml#/endpoints/request_access_token"

  # Catalog IDA
  "/catalog/v1/catalogs":
    $ref: "https://raw.githubusercontent.com/edx/course-discovery/649a4cb/api.yaml#/endpoints/v1/catalogs"
  "/catalog/v1/catalogs/{id}":
    $ref: "https://raw.githubusercontent.com/edx/course-discovery/649a4cb/api.yaml#/endpoints/v1/catalogById"
  "/catalog/v1/catalogs/{id}/courses":
      $ref: "https://raw.githubusercontent.com/edx/course-discovery/649a4cb/api.yaml#/endpoints/v1/catalogCourses"

# swagger-codegen automatically generates "inline_response_*" models for inline schemas.
#   Unfortunately, AWS API Gateway can only handle alphanumeric model names (facepalm).
#   So, at least for now, you can't inline schemas until AWS fixes this, and you need to
#   declare any referenced definitions here because Swagger doesn't let you actually import
#   document fragments, you're really importing path and definition fragments separately. Yay!
definitions:
  heartbeat:
    $ref: "./heartbeat.yaml#/definitions/heartbeat"
  bearer:
    $ref: "./oauth.yaml#/definitions/bearer"

# edX extension point. Lists the vendors in use and their specific 
#  parameters that are expected by upstream refs. 
# Upstream API owners: document your dependencies in this index file to
#  avoid conflicts with other upstreams.
x-edx-api-vendors:
  aws_apigateway:
    stage_variables:
    - "id"
    - "landing_page"
    - "edxapp_host"
    - "discovery_host"
